/* ==========================================================================
   CHRISTMAS DECORATIONS
   ========================================================================== */

/* Fix white bar at bottom - ensure html background matches */
html {
    background-color: var(--global-footer-bg-color);
}

/* ==========================================================================
   CHRISTMAS CANDY CANE BORDER
   ========================================================================== */

/* Candy Cane Border - Top (for masthead) */
.christmas-border-top {
    border-bottom: none !important;
    overflow: hidden;
}

.christmas-border-top::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: repeating-linear-gradient(
        45deg,
        #C41E3A 0px,
        #C41E3A 6px,
        #FFFFFF 6px,
        #FFFFFF 12px,
        #1D6F42 12px,
        #1D6F42 18px,
        #FFFFFF 18px,
        #FFFFFF 24px
    );
    box-shadow:
        inset 0 1px 1px rgba(255,255,255,0.3),
        0 1px 2px rgba(0,0,0,0.1);
    z-index: 100;
}

/* Candy Cane Border - Bottom (for footer) */
.christmas-border-bottom {
    border-top: none !important;
}

.christmas-border-bottom::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: repeating-linear-gradient(
        -45deg,
        #C41E3A 0px,
        #C41E3A 6px,
        #FFFFFF 6px,
        #FFFFFF 12px,
        #1D6F42 12px,
        #1D6F42 18px,
        #FFFFFF 18px,
        #FFFFFF 24px
    );
    box-shadow:
        inset 0 -1px 1px rgba(255,255,255,0.3),
        0 -1px 2px rgba(0,0,0,0.1);
    z-index: 100;
}

/* ==========================================================================
   CHRISTMAS LAYOUT ADJUSTMENTS
   ========================================================================== */

/* Increase masthead bottom padding */
.masthead__inner-wrap {
    padding-bottom: calc(1em + 15px) !important;
}

/* Add spacing between masthead and content for medium screens (925px - 1024px) */
@media screen and (min-width: 925px) and (max-width: 1023px) {
    #main {
        margin-top: 2em !important;
    }
}

/* Increase spacing between header and profile picture */
@media screen and (min-width: 1024px) {
    .sidebar {
        padding-top: 105px !important;  /* masthead 70px + extra 35px */
    }
}

/* ==========================================================================
   CHRISTMAS WREATH DECORATION FOR PROFILE
   ========================================================================== */

/* Default (small screens): no wreath */
.author__avatar {
    position: relative;
}

.sidebar {
    overflow: visible !important;
}

/* Dark theme icon visibility fix */
html[data-theme="dark"] .fab.fa-github,
html[data-theme="dark"] .fa-github {
    color: #f0f0f0 !important;
}

html[data-theme="dark"] .author__urls .fab,
html[data-theme="dark"] .author__urls .fas,
html[data-theme="dark"] .author__urls .fa,
html[data-theme="dark"] .author__urls .ai {
    color: #e0e0e0 !important;
}

/* Christmas wreath frame around profile picture */
.author__avatar img {
    position: relative;
    z-index: 1;
    border-radius: 50% !important;  /* Ensure round border in all browsers */
}

/* Wreath - hidden by default on small screens */
.author__avatar::after {
    content: '';
    display: none;
}

/* Large screen (925px+): Show wreath when avatar is displayed as block */
@media screen and (min-width: 925px) {
    .author__avatar {
        /* Make container shrink-wrap around image for proper wreath sizing */
        display: inline-block !important;
        overflow: visible !important;
        margin-bottom: 35px;
        margin-left: 10px;
    }

    .author__avatar img {
        /* Ensure image defines the container size */
        display: block;
        width: 100%;
        max-width: 175px;
        border-radius: 50% !important;  /* Ensure round border */
    }

    .author__avatar::after {
        display: block;
        content: '';
        position: absolute;
        /* Center on the container (which now matches image size) */
        top: 50%;
        left: 50%;
        /* Fine-tune alignment: adjust these values to align wreath center with photo center */
        transform: translate(-50%, -50%) translate(3px, -5px);
        /* Size relative to container: 139% of image size (90% of original 154%) */
        width: 139%;
        height: 139%;
        background-image: url('/images/christmas/wreath-centered.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center center;
        z-index: 2;
        pointer-events: none;
    }
}

/* ==========================================================================
   SANTA SLEIGH ANIMATION
   ========================================================================== */

.santa-sleigh {
    position: absolute;
    width: 200px;
    height: 90px;
    top: calc(50% + 15px);
    transform: translateY(-50%);
    z-index: 200;
    pointer-events: none;
    animation: santa-fly-headbar 29s linear infinite;
    filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3));
    background-image: url('/images/christmas/santa-sleigh-rotated-10.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* Santa flying within headbar */
@keyframes santa-fly-headbar {
    /* First pass: left to right */
    0% {
        left: -120px;
        opacity: 0;
        transform: translateY(-50%) scaleX(1);
    }
    5% {
        opacity: 1;
    }
    45% {
        left: calc(100% + 20px);
        opacity: 1;
        transform: translateY(-50%) scaleX(1);
    }
    48% {
        opacity: 0;
    }
    /* Prepare for reverse */
    52% {
        left: calc(100% + 20px);
        opacity: 0;
        transform: translateY(-50%) scaleX(-1);
    }
    /* Second pass: right to left */
    55% {
        opacity: 1;
    }
    95% {
        left: -120px;
        opacity: 1;
        transform: translateY(-50%) scaleX(-1);
    }
    98% {
        opacity: 0;
    }
    100% {
        left: -120px;
        opacity: 0;
        transform: translateY(-50%) scaleX(1);
    }
}

/* Hide the reverse sleigh - not needed anymore */
.santa-sleigh-reverse {
    display: none;
}

/* ==========================================================================
   SNOWFLAKES - Pure CSS Implementation
   ========================================================================== */

.snowflakes {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

.snowflake {
    position: absolute;
    top: -10px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 0 3px rgba(255, 255, 255, 0.9);
    animation: snowfall linear infinite;
}

/* Dark theme snowflakes - more visible */
html[data-theme="dark"] .snowflake {
    box-shadow: 0 0 5px rgba(255, 255, 255, 1);
}

/* Snowfall animation with vendor prefixes */
@-webkit-keyframes snowfall {
    0% {
        -webkit-transform: translateY(-10px) translateX(0) rotate(0deg);
        transform: translateY(-10px) translateX(0) rotate(0deg);
        opacity: 0;
    }
    10% { opacity: 0.6; }
    90% { opacity: 0.6; }
    100% {
        -webkit-transform: translateY(100vh) translateX(20px) rotate(360deg);
        transform: translateY(100vh) translateX(20px) rotate(360deg);
        opacity: 0;
    }
}

@keyframes snowfall {
    0% {
        -webkit-transform: translateY(-10px) translateX(0) rotate(0deg);
        transform: translateY(-10px) translateX(0) rotate(0deg);
        opacity: 0;
    }
    10% { opacity: 0.6; }
    90% { opacity: 0.6; }
    100% {
        -webkit-transform: translateY(100vh) translateX(20px) rotate(360deg);
        transform: translateY(100vh) translateX(20px) rotate(360deg);
        opacity: 0;
    }
}

/* Individual snowflake positions, sizes, and timing */
.sf-1  { left: 2%;  width: 4px; height: 4px; animation-duration: 12s; animation-delay: 0s; }
.sf-2  { left: 5%;  width: 3px; height: 3px; animation-duration: 15s; animation-delay: 2s; }
.sf-3  { left: 8%;  width: 5px; height: 5px; animation-duration: 18s; animation-delay: 4s; }
.sf-4  { left: 11%; width: 4px; height: 4px; animation-duration: 14s; animation-delay: 1s; }
.sf-5  { left: 14%; width: 6px; height: 6px; animation-duration: 16s; animation-delay: 3s; }
.sf-6  { left: 17%; width: 3px; height: 3px; animation-duration: 13s; animation-delay: 5s; }
.sf-7  { left: 20%; width: 5px; height: 5px; animation-duration: 17s; animation-delay: 7s; }
.sf-8  { left: 23%; width: 4px; height: 4px; animation-duration: 11s; animation-delay: 0.5s; }
.sf-9  { left: 26%; width: 3px; height: 3px; animation-duration: 19s; animation-delay: 8s; }
.sf-10 { left: 29%; width: 6px; height: 6px; animation-duration: 12s; animation-delay: 2.5s; }
.sf-11 { left: 32%; width: 4px; height: 4px; animation-duration: 14s; animation-delay: 6s; }
.sf-12 { left: 35%; width: 5px; height: 5px; animation-duration: 16s; animation-delay: 1.5s; }
.sf-13 { left: 38%; width: 3px; height: 3px; animation-duration: 18s; animation-delay: 9s; }
.sf-14 { left: 41%; width: 4px; height: 4px; animation-duration: 13s; animation-delay: 3.5s; }
.sf-15 { left: 44%; width: 6px; height: 6px; animation-duration: 15s; animation-delay: 0.2s; }
.sf-16 { left: 47%; width: 3px; height: 3px; animation-duration: 17s; animation-delay: 4.5s; }
.sf-17 { left: 50%; width: 5px; height: 5px; animation-duration: 11s; animation-delay: 7.5s; }
.sf-18 { left: 53%; width: 4px; height: 4px; animation-duration: 19s; animation-delay: 2.2s; }
.sf-19 { left: 56%; width: 3px; height: 3px; animation-duration: 12s; animation-delay: 5.5s; }
.sf-20 { left: 59%; width: 6px; height: 6px; animation-duration: 14s; animation-delay: 8.5s; }
.sf-21 { left: 62%; width: 4px; height: 4px; animation-duration: 16s; animation-delay: 1.2s; }
.sf-22 { left: 65%; width: 5px; height: 5px; animation-duration: 18s; animation-delay: 6.5s; }
.sf-23 { left: 68%; width: 3px; height: 3px; animation-duration: 13s; animation-delay: 0.8s; }
.sf-24 { left: 71%; width: 4px; height: 4px; animation-duration: 15s; animation-delay: 9.5s; }
.sf-25 { left: 74%; width: 6px; height: 6px; animation-duration: 17s; animation-delay: 3.2s; }
.sf-26 { left: 77%; width: 3px; height: 3px; animation-duration: 11s; animation-delay: 4.8s; }
.sf-27 { left: 80%; width: 5px; height: 5px; animation-duration: 19s; animation-delay: 7.2s; }
.sf-28 { left: 83%; width: 4px; height: 4px; animation-duration: 12s; animation-delay: 1.8s; }
.sf-29 { left: 86%; width: 3px; height: 3px; animation-duration: 14s; animation-delay: 5.2s; }
.sf-30 { left: 89%; width: 6px; height: 6px; animation-duration: 16s; animation-delay: 8.2s; }
.sf-31 { left: 92%; width: 4px; height: 4px; animation-duration: 18s; animation-delay: 2.8s; }
.sf-32 { left: 95%; width: 5px; height: 5px; animation-duration: 13s; animation-delay: 6.2s; }
.sf-33 { left: 98%; width: 3px; height: 3px; animation-duration: 15s; animation-delay: 0.3s; }
.sf-34 { left: 3%;  width: 4px; height: 4px; animation-duration: 17s; animation-delay: 10s; }
.sf-35 { left: 12%; width: 6px; height: 6px; animation-duration: 11s; animation-delay: 3.8s; }
.sf-36 { left: 28%; width: 3px; height: 3px; animation-duration: 19s; animation-delay: 6.8s; }
.sf-37 { left: 45%; width: 5px; height: 5px; animation-duration: 12s; animation-delay: 9.2s; }
.sf-38 { left: 63%; width: 4px; height: 4px; animation-duration: 14s; animation-delay: 4.2s; }
.sf-39 { left: 78%; width: 3px; height: 3px; animation-duration: 16s; animation-delay: 7.8s; }
.sf-40 { left: 91%; width: 6px; height: 6px; animation-duration: 18s; animation-delay: 1.5s; }

/* ==========================================================================
   CHRISTMAS BACKGROUND DECORATIONS
   ========================================================================== */

/* Subtle Christmas pattern background */
body {
    background-image:
        radial-gradient(circle at 20% 80%, rgba(193, 30, 58, 0.03) 0%, transparent 25%),
        radial-gradient(circle at 80% 20%, rgba(29, 111, 66, 0.03) 0%, transparent 25%),
        radial-gradient(circle at 40% 40%, rgba(212, 175, 55, 0.02) 0%, transparent 20%),
        radial-gradient(circle at 60% 60%, rgba(193, 30, 58, 0.02) 0%, transparent 20%);
    background-attachment: fixed;
}

/* Dark theme background adjustments */
html[data-theme="dark"] body {
    background-image:
        radial-gradient(circle at 20% 80%, rgba(255, 107, 107, 0.05) 0%, transparent 25%),
        radial-gradient(circle at 80% 20%, rgba(76, 175, 80, 0.05) 0%, transparent 25%),
        radial-gradient(circle at 40% 40%, rgba(255, 215, 0, 0.03) 0%, transparent 20%),
        radial-gradient(circle at 60% 60%, rgba(255, 107, 107, 0.03) 0%, transparent 20%);
}
